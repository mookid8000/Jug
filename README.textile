h1. What?

p. Jug is an experimental DI container.

p. It is nowhere near finished. Actually it is probably not even the slightest bit functional.

h1. Why?

p. After having messed a little bit with Castle Windsor's source code, I have been having some nasty thoughts on how container extensibility could be implemented. It may or may not work out.

h1. What's interesting about it?

p. Not much, really. I was just a little bit inspired by one of the posts on Castle Windsor's UserVoice, that suggested that the container be put more to use in extensibility scenarios.

p. E.g. it is annoying with Windsor that IHandlerSelector is just a plan old object instance, that sits right there in the container - instantiated and all. Why not pull IHandlerSelectors from the container?

p. In Jug, you select between various implementations of the same service like so:

bq.. var container = new Jug.Container();
	
	// register services
	container.Register<ISomeService, FirstImplementation>()
		.Register<ISomeService, SecondImplementation>();

	// register selector
	container.Register<IComponentSelector<ISomeService>>, MySelector>();

	// selector will be asked for its opinion now:
	var instance = container.Resolve<ISomeService>();

p. and MySelector could look something like this:

bq.. public class MySelector : IComponentSelector<ISomeService>
	{
		public ComponentModel Select(ComponentModel[] componentModels)
		{
			return componentModels.Single(c => c.ImplementationType.Name.StartsWith("Second"));
		}
	}

p. ensuring that SecondImplementation will be picked.

p. Now, imaging how nifty this could be when the selector depends on various business services and stuff, thus providing the hook that has always been missing in Windsor!

h1. Disclaimer

p. As I said: "It is nowhere near finished. Actually it is probably not even the slightest bit functional."

p. Seriously!